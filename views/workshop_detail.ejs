<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title><%= event.title %> | Flavor Academy</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Open+Sans:wght@400;600&display=swap">
        <link rel="stylesheet" href="/attendee.css">
        <link rel="stylesheet" href="/main.css">
    </head>
    <body>
        
        <!-- navigation bar -->
        <nav class="navbar navbar-custom mb-4">
            <div class="container-fluid justify-content-end align-items-center" style="height: 100%;">
                <span class="navbar-brand mb-0">Flavor Academy</span>
            </div>
        </nav>
    
        <!-- back to guest portal -->
        <div class="mt-2 mb-4 home-btn-left">
            <a href="/attendee" class="btn btn-outline-light btn-sm">Back to Workshops</a>
        </div>

        <!-- workshop details -->
        <div class="container text-center mt-5">
            <h1 class="mb-3">Workshop Details</h1>
            <h2 class="mb-2"><%= event.title %></h2>
            <h5 class="text-info mb-3"><%= event.event_date %></h5>
            <p class="text-light mb-4" style="max-width: 600px; margin: 0 auto;"><%= event.description %></p>
        </div>
    
        <!-- seat reservation form -->
        <div class="container mt-5" style="max-width: 600px;">
            <h3 class="text-center mb-4">Reserve Your Seats</h3>
            
            <form method="POST" action="/attendee/event/<%= event.event_id %>/book" class="card-accent p-4 rounded shadow">
    
                <!-- guest name -->
                <div class="mb-3">
                    <label for="attendee_name" class="form-label">Your Name <span class="text-danger">*</span></label>
                    <input
                        type="text"
                        class="form-control"
                        id="attendee_name"
                        name="attendee_name"
                        placeholder="Enter your full name"
                        required
                    >
                </div>

                <!-- guest email (extension feature) -->
                <div class="mb-3">
                    <label for="attendee_email" class="form-label">Email Address</label>
                    <input
                        type="email"
                        class="form-control"
                        id="attendee_email"
                        name="attendee_email"
                        placeholder="your.email@example.com"
                    >
                    <div class="form-text">For reservation confirmation</div>
                </div>
    
                <!-- seat selection -->
                <% tickets.forEach(ticket => { %>
                    <div class="mb-3">
                        <label class="form-label">
                            <% if (ticket.type === 'full') { %>
                                Standard Seat
                            <% } else if (ticket.type === 'concession') { %>
                                Student/Senior Seat
                            <% } else { %>
                                <%= ticket.type.charAt(0).toUpperCase() + ticket.type.slice(1) %> Seat
                            <% } %>
                            ($<%= ticket.price.toFixed(2) %>)
                            <span class="text-muted">| Available: <%= ticket.remaining %></span>
                        </label>
                        <input
                            type="number"
                            name="<%= ticket.type %>_quantity"
                            class="form-control"
                            min="0"
                            max="<%= ticket.remaining %>"
                            value="0"
                        >
                    </div>
                <% }) %>

                <!-- dietary requirements (extension feature) -->
                <div class="mb-3">
                    <label for="dietary_notes" class="form-label">Dietary Requirements or Allergies</label>
                    <textarea
                        class="form-control"
                        id="dietary_notes"
                        name="dietary_notes"
                        rows="2"
                        placeholder="e.g. Vegetarian, nut allergy, gluten free..."
                    ></textarea>
                    <div class="form-text">Please let us know of any dietary restrictions</div>
                </div>
    
                <!-- submit button -->
                <div class="text-center mt-4">
                    <button type="submit" class="btn btn-accent btn-lg">Reserve Seats</button>
                </div>
    
            </form>

            <!-- back link -->
            <div class="mt-4 text-center">
                <a href="/attendee" class="text-main text-decoration-none">Back to All Workshops</a>
            </div>
        </div>

        <!-- footer spacing -->
        <div class="mb-5"></div>

    </body>
</html>
<!-- END -->
